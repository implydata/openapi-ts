{{>header}}

import type { ApiErrorDetail } from './ApiError';
import type { ApiRequestOptions } from './ApiRequestOptions';
import type { ApiResult } from './ApiResult';

type Resolver<T> = (options: ApiRequestOptions) => Promise<T>;
type Headers = Record<string, string>;

export interface OpenAPIConfig {
	apiVersion: string;
	baseUrl: string;
	withCredentials: boolean;
	credentials: 'include' | 'omit' | 'same-origin';
	token?: string | Resolver<string>;
	username?: string | Resolver<string>;
	password?: string | Resolver<string>;
	headers?: Headers | Resolver<Headers>;
	encodePath?: (path: string) => string;
	getErrorDetail?: (message: string, response: ApiResult) => ApiErrorDetail;
}

export const OpenAPI: OpenAPIConfig = {
	apiVersion: '{{{version}}}',
	baseUrl: '{{{server}}}',
	withCredentials: false,
	credentials: 'include',
};
